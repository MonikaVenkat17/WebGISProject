<!DOCTYPE html>
<html>

<head>
<title>Live Map - Campus Waste Management</title>

<link rel="stylesheet" href="https://js.arcgis.com/4.6/esri/css/main.css">
<script src="https://js.arcgis.com/4.6/"></script>

<!-- used online tools to help with the webpage design and to get color reference -->

<style>
body {
  font-family: Arial;
  background-color: white;
  color: black;
  margin: 0;
}

.header {
  background-color: maroon;
  color: white;
  padding: 20px;
  text-align: center;
}

.nav {
  background-color: #f2f2f2;
  border-bottom: 1px solid black;
  text-align: center;
  padding: 10px 0;
}

.nav a {
  display: inline-block;
  margin: 0 10px;
  padding: 8px 16px;
  background-color: #e0e0e0;
  color: black;
  text-decoration: none;
  border-radius: 5px;
  font-weight: bold;
}

.nav a:hover {
  background-color: #cccccc;
}

.section {
  padding: 20px;
}

/* ArcGIS map container */
#viewDiv {
  height: 500px;
  width: 100%;
  border: 1px solid #ccc;
  margin-top: 20px;
}

/* Leaflet heatmap container */
#leafletMap {
  margin-top: 40px;
}

#leafletMap iframe {
  width: 100%;
  height: 500px;
  border: 1px solid #ccc;
}
</style>

</head>

<body>

<!-- header -->
<div class="header">
<h1>Campus Waste Management & Tracking</h1>
<h3 style="margin-top: 10px; font-weight: normal;">
Charles Tacker, Destiny Silva, Claire Lifrieri, Rishit Podder, Monika Venkat â€“ GEOG 478
</h3>
<p>Tracking Trash Trends at Texas A&M</p>
</div>

<!-- tabs -->
<div class="nav">
<a href="index.html">Introduction</a>
<a href="solution.html">Solution</a>
<a href="map.html">Maps</a>
</div>

<!-- map header -->
<div class="section">
<h2>Live Point Map and Heat Map</h2>
<p>Here is the live point map showing trash reports in real-time (ArcGIS Online):</p>

<!-- ArcGIS Map -->
<div id="viewDiv"></div>

<p>This is a heat map showing trash reports in real-time (Leaflet):</p>

<!-- Leaflet Map -->
<div id="leafletMap">
<iframe src="https://rishitpodder.github.io/478-Final-Project/finalheatmap.html"></iframe>
</div>
</div>

<!-- ArcGIS Script -->
<script>
require([
  "esri/Map",
  "esri/views/MapView",
  "esri/layers/FeatureLayer",
  "dojo/domReady!"
], function(Map, MapView, FeatureLayer) {

  var map = new Map({
    basemap: "streets"
  });

  var view = new MapView({
    container: "viewDiv",
    map: map,
    center: [-96.339469, 30.617152], // College Station
    zoom: 16
  });

  var featureLayer = new FeatureLayer({
    url: "https://services1.arcgis.com/qr14biwnHA6Vis6l/arcgis/rest/services/Campus_Waste_Management_Survey__(view)/FeatureServer"
  });

  featureLayer.popupTemplate = {
    title: "Issue at {spot_on_campus}",
    content: [{
      type: "fields",
      fieldInfos: [
        { fieldName: "hazardmaintenance_need", label: "Issue" },
        { fieldName: "observation_date_and_time", label: "Time" },
        { fieldName: "level_of_severity", label: "Severity" }
      ]
    }]
  };

  map.add(featureLayer);
});
</script>

</body>
</html>
